const a2_0x100f=['../../../utilities/environment','note','__esModule','Nx\x20Cloud:\x20Cache\x20miss\x20','__awaiter','NX_CLOUD_DISTRIBUTED_EXECUTION_ID','response','hash','scheduledTasks','VERBOSE_LOGGING','store','statuses','resolve','done','hashUrls','get','.\x20Read\x20only\x20token\x20is\x20used.','value','filter','remote-cache-hit','push','next','map','throw','api','messages','then','requests','status','axiosException','cache-miss','waitForStoreRequestsToComplete','CloudRemoteCache','runContext','cacheError','retrieve','storeRequests','../../../utilities/nx-imports','put','extractErrorMessage','fileStorage','storage'];(function(_0x13fb89,_0x100f14){const _0x5166ae=function(_0x27cef6){while(--_0x27cef6){_0x13fb89['push'](_0x13fb89['shift']());}};_0x5166ae(++_0x100f14);}(a2_0x100f,0xb7));const a2_0x5166=function(_0x13fb89,_0x100f14){_0x13fb89=_0x13fb89-0x0;let _0x5166ae=a2_0x100f[_0x13fb89];return _0x5166ae;};'use strict';var __awaiter=this&&this[a2_0x5166('0x1f')]||function(_0x2abcbe,_0x413121,_0x3ab90d,_0x13cc50){function _0x1ecbc2(_0x32d615){return _0x32d615 instanceof _0x3ab90d?_0x32d615:new _0x3ab90d(function(_0x5901ef){_0x5901ef(_0x32d615);});}return new(_0x3ab90d||(_0x3ab90d=Promise))(function(_0x24ac78,_0x223d01){function _0x4addd5(_0x596222){try{_0x45468c(_0x13cc50[a2_0x5166('0x6')](_0x596222));}catch(_0x48701b){_0x223d01(_0x48701b);}}function _0x2542a5(_0x28f504){try{_0x45468c(_0x13cc50[a2_0x5166('0x8')](_0x28f504));}catch(_0x4da8d7){_0x223d01(_0x4da8d7);}}function _0x45468c(_0x13b369){_0x13b369[a2_0x5166('0x28')]?_0x24ac78(_0x13b369[a2_0x5166('0x2')]):_0x1ecbc2(_0x13b369[a2_0x5166('0x2')])['then'](_0x4addd5,_0x2542a5);}_0x45468c((_0x13cc50=_0x13cc50['apply'](_0x2abcbe,_0x413121||[]))[a2_0x5166('0x6')]());});};Object['defineProperty'](exports,a2_0x5166('0x1d'),{'value':!![]});exports[a2_0x5166('0x11')]=void 0x0;const environment_1=require(a2_0x5166('0x1b'));const {output}=require(a2_0x5166('0x16'));class CloudRemoteCache{constructor(_0x510520,_0x3a5a8a,_0x438f12,_0x52fda8){this[a2_0x5166('0xa')]=_0x510520;this[a2_0x5166('0x9')]=_0x3a5a8a;this[a2_0x5166('0x12')]=_0x438f12;this[a2_0x5166('0x19')]=_0x52fda8;this[a2_0x5166('0x15')]=[];}[a2_0x5166('0x14')](_0x521765,_0x2d894f){var _0x500cda;return __awaiter(this,void 0x0,void 0x0,function*(){if(this['messages'][a2_0x5166('0x13')])return![];const _0x28043b=yield this[a2_0x5166('0x29')](_0x521765);if(!_0x28043b||!_0x28043b[a2_0x5166('0x0')]){if(environment_1[a2_0x5166('0x24')]){output[a2_0x5166('0x1c')]({'title':'Nx\x20Cloud:\x20Cache\x20miss\x20'+_0x521765+'.'});}this[a2_0x5166('0x12')][a2_0x5166('0x26')][_0x521765]=a2_0x5166('0xf');return![];}try{yield this['fileStorage'][a2_0x5166('0x14')](_0x521765,_0x28043b[a2_0x5166('0x0')],_0x2d894f);this[a2_0x5166('0x12')][a2_0x5166('0x26')][_0x521765]=a2_0x5166('0x4');return!![];}catch(_0x415c2b){const _0x242398=(_0x500cda=_0x415c2b['axiosException'])!==null&&_0x500cda!==void 0x0?_0x500cda:_0x415c2b;if(_0x242398[a2_0x5166('0x21')]&&_0x242398['response'][a2_0x5166('0xd')]===0x194){if(environment_1[a2_0x5166('0x24')]){output[a2_0x5166('0x1c')]({'title':a2_0x5166('0x1e')+_0x521765+'.\x20Status\x20404.'});}}else{this[a2_0x5166('0xa')][a2_0x5166('0x13')]=this[a2_0x5166('0xa')][a2_0x5166('0x18')](_0x242398,a2_0x5166('0x1a'));}this[a2_0x5166('0x12')][a2_0x5166('0x26')][_0x521765]='cache-miss';return![];}});}[a2_0x5166('0x25')](_0x3ba8fa,_0x35baff){return __awaiter(this,void 0x0,void 0x0,function*(){if(this['messages'][a2_0x5166('0x13')])return![];const _0x2baadc=Promise[a2_0x5166('0x27')]()[a2_0x5166('0xb')](()=>__awaiter(this,void 0x0,void 0x0,function*(){var _0x306cd2;const _0x34fbfb=yield this[a2_0x5166('0x29')](_0x3ba8fa);if(!_0x34fbfb)return![];if(!_0x34fbfb[a2_0x5166('0x17')]){if(environment_1[a2_0x5166('0x24')]){output[a2_0x5166('0x1c')]({'title':'Nx\x20Cloud:\x20Skipping\x20storing\x20'+_0x3ba8fa+a2_0x5166('0x1')});}return!![];}try{yield this['fileStorage'][a2_0x5166('0x25')](_0x3ba8fa,_0x34fbfb[a2_0x5166('0x17')],_0x35baff);return!![];}catch(_0x4e6e71){const _0x27d21e=(_0x306cd2=_0x4e6e71[a2_0x5166('0xe')])!==null&&_0x306cd2!==void 0x0?_0x306cd2:_0x4e6e71;this[a2_0x5166('0xa')][a2_0x5166('0x13')]=this[a2_0x5166('0xa')][a2_0x5166('0x18')](_0x27d21e,a2_0x5166('0x1a'));return![];}}));this[a2_0x5166('0x15')][a2_0x5166('0x5')](_0x2baadc);return _0x2baadc;});}[a2_0x5166('0x29')](_0x40b37e){return __awaiter(this,void 0x0,void 0x0,function*(){if(_0x40b37e in this['runContext'][a2_0x5166('0xc')]){return(yield this['runContext']['requests'][_0x40b37e])[_0x40b37e];}else{const _0x1497f7=this[a2_0x5166('0x12')][a2_0x5166('0x23')][a2_0x5166('0x3')](_0x5fd848=>!this[a2_0x5166('0x12')][a2_0x5166('0xc')][_0x5fd848[a2_0x5166('0x22')]])[a2_0x5166('0x7')](_0x182ff7=>_0x182ff7[a2_0x5166('0x22')]);if(_0x1497f7['indexOf'](_0x40b37e)===-0x1){_0x1497f7[a2_0x5166('0x5')](_0x40b37e);}const _0x4798a7=this[a2_0x5166('0x9')]['startRun'](environment_1[a2_0x5166('0x20')],_0x1497f7);_0x1497f7['forEach'](_0x28d3d9=>{this[a2_0x5166('0x12')][a2_0x5166('0xc')][_0x28d3d9]=_0x4798a7;});return(yield _0x4798a7)[_0x40b37e];}});}[a2_0x5166('0x10')](){return Promise['all'](this['storeRequests'])[a2_0x5166('0xb')](_0x1e1bc3=>_0x1e1bc3['reduce']((_0x25fbe9,_0x39a93d)=>_0x25fbe9&&_0x39a93d,!![]));}}exports['CloudRemoteCache']=CloudRemoteCache;