{"version":3,"file":"project.js","sourceRoot":"","sources":["../../../schematics/utils/project.ts"],"names":[],"mappings":";;;AAAA,2DAAqE;AAErE,wBAA8B;AAE9B,SAAgB,WAAW,CAAC,IAAU,EAAE,IAAa;IACnD,MAAM,OAAO,GAAG,UAAU,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;IACvC,qEAAqE;IACrE,8BAA8B;IAC9B,OAAO,CAAC,OAAO,CAAC,SAAS,IAAI,OAAO,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC;AACnE,CAAC;AALD,kCAKC;AAED,SAAS,UAAU,CAAC,IAAU,EAAE,IAAa;IAC3C,MAAM,MAAM,GAAG,kBAAkB,CAAC,IAAI,CAAC,CAAC;IACxC,IAAI,IAAI,EAAE;QACR,MAAM,OAAO,GAAG,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QACtC,IAAI,CAAC,OAAO,EAAE;YACZ,MAAM,IAAI,gCAAmB,CAAC,yBAAyB,IAAI,EAAE,CAAC,CAAC;SAChE;QAED,OAAO,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;KAC9B;IAED,MAAM,YAAY,GAAG,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;IAClD,IAAI,YAAY,CAAC,MAAM,KAAK,CAAC,EAAE;QAC7B,MAAM,IAAI,gCAAmB,CAC3B,iDAAiD,CAClD,CAAC;KACH;IAED,IAAI,YAAY,CAAC,MAAM,GAAG,CAAC,EAAE;QAC3B,MAAM,EAAC,cAAc,EAAC,GAAG,MAAM,CAAC;QAChC,OAAO,MAAM,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;KACxC;IAED,MAAM,WAAW,GAAG,YAAY,CAAC,CAAC,CAAC,CAAC;IACpC,OAAO,MAAM,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;AACtC,CAAC;AAED,SAAS,kBAAkB,CAAC,IAAU;IACpC,MAAM,IAAI,GAAG,gBAAgB,CAAC,IAAI,CAAC,CAAC;IACpC,MAAM,MAAM,GAAG,IAAA,cAAW,EAAC,IAAI,EAAE,IAAI,CAAC,CAAC;IAEvC,OAAO,MAAM,CAAC;AAChB,CAAC;AAED,SAAS,gBAAgB,CAAC,IAAU;IAClC,MAAM,aAAa,GAAG,CAAC,eAAe,EAAE,gBAAgB,CAAC,CAAC;IAC1D,MAAM,IAAI,GAAG,aAAa,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;IAE7D,IAAI,CAAC,IAAI,EAAE;QACT,MAAM,IAAI,gCAAmB,CAC3B,4CAA4C;YAC1C,sDAAsD,CACzD,CAAC;KACH;IAED,OAAO,IAAI,CAAC;AACd,CAAC","sourcesContent":["import {Tree, SchematicsException} from '@angular-devkit/schematics';\n\nimport {getJsonFile} from '.';\n\nexport function getMainPath(host: Tree, name?: string) {\n  const project = getProject(host, name);\n  // XXX: it seems like a breaking change in @angular-devkit/schematics\n  // between version 0.7 and 0.8\n  return (project.architect || project.targets).build.options.main;\n}\n\nfunction getProject(host: Tree, name?: string) {\n  const config = getWorkspaceConfig(host);\n  if (name) {\n    const project = config.projects[name];\n    if (!project) {\n      throw new SchematicsException(`Couldn't file project ${name}`);\n    }\n\n    return config.projects[name];\n  }\n\n  const projectNames = Object.keys(config.projects);\n  if (projectNames.length === 0) {\n    throw new SchematicsException(\n      `Invalid configuration object! No project found!`,\n    );\n  }\n\n  if (projectNames.length > 1) {\n    const {defaultProject} = config;\n    return config.projects[defaultProject];\n  }\n\n  const projectName = projectNames[0];\n  return config.projects[projectName];\n}\n\nfunction getWorkspaceConfig(host: Tree): any {\n  const path = getWorkspacePath(host);\n  const config = getJsonFile(host, path);\n\n  return config;\n}\n\nfunction getWorkspacePath(host: Tree): string {\n  const possibleFiles = ['/angular.json', '/.angular.json'];\n  const path = possibleFiles.find((path) => host.exists(path));\n\n  if (!path) {\n    throw new SchematicsException(\n      `Couldn't find Angular configuration file! ` +\n        `Execute in a project, created with Angular CLI ^6.0.`,\n    );\n  }\n\n  return path;\n}\n"]}