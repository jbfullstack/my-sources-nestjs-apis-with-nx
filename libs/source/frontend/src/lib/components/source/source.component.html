
<div *ngIf="source && ((this.showOwned$ | async))" >
    <div class="col-md-6 col-md-offset-3 login-form" >
        <!-- <div class="col-md-6 col-md-offset-3 login-form" > -->
            
        <div class="st-login-title text-center">
            <mat-card [ngClass]="{
                'private': !source.public,
                'public': source.public,
                'mat-card': true
            }" >

            <div *ngIf="!editMode">
                <mat-card-header >

                    
                    <img src="{{retrieveHeaderImage()}}" matTooltip="{{ source.type.title }}" mat-card-avatar />
                    <mat-card-subtitle >{{  printTagList() }}</mat-card-subtitle>
                    <mat-card-title   *ngIf="hasTitle()"  
                                        [highlight]="searchParent" [caseSensitive]="false" customClasses="highlighted-text" 
                                        [displayContent]="title()" displayTitle="title: ">
                    </mat-card-title>
                    <!-- <div [highlight]="searchParent" [caseSensitive]="false" customClasses="my-highlight-class" >{{ title() }}</div> -->
                </mat-card-header>
                <mat-card-content>
                    <a *ngIf="hasUrl()" href="{{ source.url }}" target="_blank">url</a>
                    
                    <mat-card-content *ngIf="hasContent()" [highlight]="searchParent" [caseSensitive]="false" customClasses="my-highlight-class" 
                                        [displayContent]="content()" displayTitle="content: ">></mat-card-content>
                    <mat-card-content   *ngIf="hasDescription()"  
                                        [highlight]="searchParent" [caseSensitive]="false" customClasses="my-highlight-class" 
                                        [displayContent]="description()" displayTitle="description: ">
                    </mat-card-content>

                 
                </mat-card-content>
                <mat-card-actions class="mat-footer">
                    <div >
                        <br>
                        <hr>
                        <mat-card-subtitle>
                            <span class="bottom">
                                owner: {{ source.owner.pseudo }}
                                <div class="align-right" >{{ source.createdAt  | date:'short' }}</div>
                            </span>
                        </mat-card-subtitle>
                    </div>
                <!-- <button mat-stroked-button matTooltip="Allow {{ user.pseudo }} inside the app" (click)="activate()">Activate</button>
                <button mat-stroked-button matTooltip="Ban {{ user.pseudo }} for ever" (click)="hide()">Hide</button>
                <button mat-stroked-button matTooltip="Delete {{ user.pseudo }}'s account" (click)="delete()">Delete</button> -->
                <div *ngIf="isOwnedByLogedUser()">
                    <button mat-stroked-button (click)="edit()" matTooltip="Edit '{{ source.title }}'">Edit</button>
                    <button mat-stroked-button (click)="delete()" matTooltip="Delete '{{ source.title }}' for ever" class="align-right">Delete</button>
                </div>
                
                </mat-card-actions>

            </div>
            <div *ngIf="editMode">
                    <mat-form-field class="example-form-field" appearance="fill">                    
                        <mat-label>Title</mat-label>
                        <input matInput type="text" [(ngModel)]="source.title" >
                        <button *ngIf="source.title" matSuffix mat-icon-button aria-label="Clear" (click)="source.title=''">
                            <mat-icon>close</mat-icon>
                        </button>
                    </mat-form-field>
                    <mat-form-field class="example-form-field" appearance="fill" >
                        <mat-label>Url</mat-label>
                        <input matInput class="input-description" type="text" [(ngModel)]="source.url">
                        <button *ngIf="source.url" matSuffix mat-icon-button aria-label="Clear" (click)="source.url=''">
                            <mat-icon>close</mat-icon>
                        </button>
                    </mat-form-field>
                    <mat-form-field class="example-form-field" appearance="fill"  >
                        <mat-label>Description</mat-label>
                        <input matInput class="input-description" type="text" [(ngModel)]="source.title">
                        <button *ngIf="source.description" matSuffix mat-icon-button aria-label="Clear" (click)="source.title=''">
                            <mat-icon>close</mat-icon>
                        </button>
                    </mat-form-field>
                    <mat-form-field class="example-form-field" appearance="fill"  >
                        <mat-label>Content</mat-label>
                        <input matInput class="input-description" type="text" [(ngModel)]="source.content">
                        <button *ngIf="source.content" matSuffix mat-icon-button aria-label="Clear" (click)="source.content=''">
                            <mat-icon>close</mat-icon>
                        </button>
                    </mat-form-field>
                    
                    <mat-checkbox class="margin-left" [(ngModel)]="source.public">Public</mat-checkbox>

                    <form [formGroup]="sourceTypesForm">
                        <mat-form-field appearance="fill" class="create-form-field">
                            <mat-label>Source type</mat-label>
                            <mat-select [(value)]="selectedType" name="type" formControlName="types">
                                <mat-option *ngFor="let type of types" [value]="type">
                                    {{type.title}}
                                </mat-option>
                            </mat-select>
                            
                        </mat-form-field>
                    </form>
                    <br>
                    

                    
                    <!-- <mat-card-title>#{{ tag.title }}</mat-card-title> -->
                    <!-- <br>
                    <mat-form-field class="example-form-field" appearance="fill" [style.width.rem]=25 >
                        <mat-label>Description</mat-label>
                        <input matInput class="input-description" type="text" [(ngModel)]="description">
                        <button *ngIf="description" matSuffix mat-icon-button aria-label="Clear" (click)="description=''">
                            <mat-icon>close</mat-icon>
                        </button>
                    </mat-form-field> -->
                    <mat-card-actions>
                        <button mat-stroked-button matTooltip="Save changes for {{ source.title }}" (click)="save()">Save</button>
                        <button mat-stroked-button matTooltip="Undo edit" (click)="editBack()">Back</button>
                    </mat-card-actions>                
            </div>
            </mat-card>
        </div>
    </div>

    <!-- <div [highlight]="searchParent" [caseSensitive]="false" customClasses="my-highlight-class" >le super texte trop bien</div> -->

    <!-- <div type="html" *ngIf="hasDescription()">description: {{ source.description | highlighter:'source':'full' }}</div>
    <p *ngIf="hasDescription()">description: {{ source.description | highlighter:'source':'full' }}</p> -->
</div>

